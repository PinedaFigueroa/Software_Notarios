<!-- archivo: app/superadmin/templates/superadmin/bufetes/listar_bufetes.html -->
<!-- fecha de creación: 09 / 08 / 25 -->
<!-- cantidad de líneas originales: 60 -->
<!-- última actualización: 09 / 08 / 25 hora 10:05 -->
<!-- motivo de la creación: Listado de bufetes con búsqueda y acciones -->
<!-- autor: Giancarlo + Tars-90 -->
<!-- -*- coding: utf-8 -*- -->

{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center">
    <h2>Bufetes</h2>
    <a href="{{ url_for('superadmin_bp.crear_bufete') }}" class="btn btn-primary">+ Nuevo Bufete</a>
  </div>

  <form class="mt-3 mb-3" method="get">
    <div class="input-group">
      <input type="text" class="form-control" name="q" placeholder="Buscar por nombre..." value="{{ q or '' }}">
      <button class="btn btn-outline-secondary" type="submit">Buscar</button>
    </div>
  </form>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Plan</th>
        <th>Activo</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for b in bufetes %}
      <tr>
        <td>{{ b.id }}</td>
        <td>{{ b.nombre_bufete }}</td>
        <td>{{ b.plan.nombre if b.plan else '-' }}</td>
        <td>
          {% if b.activo %}
          <span class="badge bg-success">Sí</span>
          {% else %}
          <span class="badge bg-secondary">No</span>
          {% endif %}
        </td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('superadmin_bp.editar_bufete', bufete_id=b.id) }}">Editar</a>
          <form action="{{ url_for('superadmin_bp.toggle_estado_bufete', bufete_id=b.id) }}" method="post" style="display:inline-block">
            <button class="btn btn-sm btn-outline-warning" type="submit">
              {{ 'Desactivar' if b.activo else 'Activar' }}
            </button>
          </form>
          <a class="btn btn-sm btn-outline-dark" href="{{ url_for('superadmin_bp.listar_usuarios', bufete_id=b.id) }}">Usuarios</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
